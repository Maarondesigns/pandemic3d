{"version":3,"file":"createGeometry.js","sources":["../../../../Source/WorkersES6/createGeometry.js"],"sourcesContent":["/* global require */\nimport defined from '../Core/defined.js';\nimport PrimitivePipeline from '../Scene/PrimitivePipeline.js';\nimport when from '../ThirdParty/when.js';\nimport createTaskProcessorWorker from './createTaskProcessorWorker.js';\n\n    var moduleCache = {};\n\n    function getModule(moduleName) {\n        var module = moduleCache[moduleName];\n        if (!defined(module)) {\n            if (typeof exports === 'object') {\n                // Use CommonJS-style require.\n                moduleCache[module] = module = require('Workers/' + moduleName);\n            } else {\n                // Use AMD-style require.\n                // in web workers, require is synchronous\n                require(['Workers/' + moduleName], function(f) {\n                    module = f;\n                    moduleCache[module] = f;\n                });\n            }\n        }\n        return module;\n    }\n\n    function createGeometry(parameters, transferableObjects) {\n        var subTasks = parameters.subTasks;\n        var length = subTasks.length;\n        var resultsOrPromises = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n            var task = subTasks[i];\n            var geometry = task.geometry;\n            var moduleName = task.moduleName;\n\n            if (defined(moduleName)) {\n                var createFunction = getModule(moduleName);\n                resultsOrPromises[i] = createFunction(geometry, task.offset);\n            } else {\n                //Already created geometry\n                resultsOrPromises[i] = geometry;\n            }\n        }\n\n        return when.all(resultsOrPromises, function(results) {\n            return PrimitivePipeline.packCreateGeometryResults(results, transferableObjects);\n        });\n    }\nexport default createTaskProcessorWorker(createGeometry);\n"],"names":["defined","when","PrimitivePipeline"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;IAAA;AAKA;IACA,IAAI,IAAI,WAAW,GAAG,EAAE,CAAC;AACzB;IACA,IAAI,SAAS,SAAS,CAAC,UAAU,EAAE;IACnC,QAAQ,IAAI,MAAM,GAAG,WAAW,CAAC,UAAU,CAAC,CAAC;IAC7C,QAAQ,IAAI,CAACA,YAAO,CAAC,MAAM,CAAC,EAAE;IAC9B,YAAY,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;IAC7C;IACA,gBAAgB,WAAW,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,OAAO,CAAC,UAAU,GAAG,UAAU,CAAC,CAAC;IAChF,aAAa,MAAM;IACnB;IACA;IACA,gBAAgB,OAAO,CAAC,CAAC,UAAU,GAAG,UAAU,CAAC,EAAE,SAAS,CAAC,EAAE;IAC/D,oBAAoB,MAAM,GAAG,CAAC,CAAC;IAC/B,oBAAoB,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC5C,iBAAiB,CAAC,CAAC;IACnB,aAAa;IACb,SAAS;IACT,QAAQ,OAAO,MAAM,CAAC;IACtB,KAAK;AACL;IACA,IAAI,SAAS,cAAc,CAAC,UAAU,EAAE,mBAAmB,EAAE;IAC7D,QAAQ,IAAI,QAAQ,GAAG,UAAU,CAAC,QAAQ,CAAC;IAC3C,QAAQ,IAAI,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;IACrC,QAAQ,IAAI,iBAAiB,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC;AAClD;IACA,QAAQ,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;IACzC,YAAY,IAAI,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;IACnC,YAAY,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;IACzC,YAAY,IAAI,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AAC7C;IACA,YAAY,IAAIA,YAAO,CAAC,UAAU,CAAC,EAAE;IACrC,gBAAgB,IAAI,cAAc,GAAG,SAAS,CAAC,UAAU,CAAC,CAAC;IAC3D,gBAAgB,iBAAiB,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;IAC7E,aAAa,MAAM;IACnB;IACA,gBAAgB,iBAAiB,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;IAChD,aAAa;IACb,SAAS;AACT;IACA,QAAQ,OAAOC,SAAI,CAAC,GAAG,CAAC,iBAAiB,EAAE,SAAS,OAAO,EAAE;IAC7D,YAAY,OAAOC,mCAAiB,CAAC,yBAAyB,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;IAC7F,SAAS,CAAC,CAAC;IACX,KAAK;AACL,2BAAe,yBAAyB,CAAC,cAAc,CAAC;;;;;;;;"}