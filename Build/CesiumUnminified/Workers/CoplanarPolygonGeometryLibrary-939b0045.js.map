{"version":3,"file":"CoplanarPolygonGeometryLibrary-939b0045.js","sources":["../../../../Source/Core/CoplanarPolygonGeometryLibrary.js"],"sourcesContent":["import Cartesian2 from './Cartesian2.js';\nimport Cartesian3 from './Cartesian3.js';\nimport Check from './Check.js';\nimport Matrix3 from './Matrix3.js';\nimport OrientedBoundingBox from './OrientedBoundingBox.js';\n\n    /**\n     * @private\n     */\n    var CoplanarPolygonGeometryLibrary = {};\n\n    var scratchIntersectionPoint = new Cartesian3();\n    var scratchXAxis = new Cartesian3();\n    var scratchYAxis = new Cartesian3();\n    var scratchZAxis = new Cartesian3();\n    var obbScratch = new OrientedBoundingBox();\n\n    CoplanarPolygonGeometryLibrary.validOutline = function(positions) {\n        //>>includeStart('debug', pragmas.debug);\n        Check.defined('positions', positions);\n        //>>includeEnd('debug');\n\n        var orientedBoundingBox = OrientedBoundingBox.fromPoints(positions, obbScratch);\n        var halfAxes = orientedBoundingBox.halfAxes;\n        var xAxis = Matrix3.getColumn(halfAxes, 0, scratchXAxis);\n        var yAxis = Matrix3.getColumn(halfAxes, 1, scratchYAxis);\n        var zAxis = Matrix3.getColumn(halfAxes, 2, scratchZAxis);\n\n        var xMag = Cartesian3.magnitude(xAxis);\n        var yMag = Cartesian3.magnitude(yAxis);\n        var zMag = Cartesian3.magnitude(zAxis);\n\n        // If all the points are on a line return undefined because we can't draw a polygon\n        return !((xMag === 0 && (yMag === 0 || zMag === 0)) || (yMag === 0 && zMag === 0));\n    };\n\n    // call after removeDuplicates\n    CoplanarPolygonGeometryLibrary.computeProjectTo2DArguments = function(positions, centerResult, planeAxis1Result, planeAxis2Result) {\n        //>>includeStart('debug', pragmas.debug);\n        Check.defined('positions', positions);\n        Check.defined('centerResult', centerResult);\n        Check.defined('planeAxis1Result', planeAxis1Result);\n        Check.defined('planeAxis2Result', planeAxis2Result);\n        //>>includeEnd('debug');\n\n        var orientedBoundingBox = OrientedBoundingBox.fromPoints(positions, obbScratch);\n        var halfAxes = orientedBoundingBox.halfAxes;\n        var xAxis = Matrix3.getColumn(halfAxes, 0, scratchXAxis);\n        var yAxis = Matrix3.getColumn(halfAxes, 1, scratchYAxis);\n        var zAxis = Matrix3.getColumn(halfAxes, 2, scratchZAxis);\n\n        var xMag = Cartesian3.magnitude(xAxis);\n        var yMag = Cartesian3.magnitude(yAxis);\n        var zMag = Cartesian3.magnitude(zAxis);\n        var min = Math.min(xMag, yMag, zMag);\n\n        // If all the points are on a line return undefined because we can't draw a polygon\n        if ((xMag === 0 && (yMag === 0 || zMag === 0)) || (yMag === 0 && zMag === 0)) {\n            return false;\n        }\n\n        var planeAxis1;\n        var planeAxis2;\n\n        if (min === yMag || min === zMag) {\n            planeAxis1 = xAxis;\n        }\n        if (min === xMag) {\n            planeAxis1 = yAxis;\n        } else if (min === zMag) {\n            planeAxis2 = yAxis;\n        }\n        if (min === xMag || min === yMag) {\n            planeAxis2 = zAxis;\n        }\n\n        Cartesian3.normalize(planeAxis1, planeAxis1Result);\n        Cartesian3.normalize(planeAxis2, planeAxis2Result);\n        Cartesian3.clone(orientedBoundingBox.center, centerResult);\n        return true;\n    };\n\n    function projectTo2D(position, center, axis1, axis2, result) {\n        var v = Cartesian3.subtract(position, center, scratchIntersectionPoint);\n        var x = Cartesian3.dot(axis1, v);\n        var y = Cartesian3.dot(axis2, v);\n\n        return Cartesian2.fromElements(x, y, result);\n    }\n\n    CoplanarPolygonGeometryLibrary.createProjectPointsTo2DFunction = function(center, axis1, axis2) {\n        return function(positions) {\n            var positionResults = new Array(positions.length);\n            for (var i = 0; i < positions.length; i++) {\n                positionResults[i] = projectTo2D(positions[i], center, axis1, axis2);\n            }\n\n            return positionResults;\n        };\n    };\n\n    CoplanarPolygonGeometryLibrary.createProjectPointTo2DFunction = function(center, axis1, axis2) {\n        return function(position, result) {\n            return projectTo2D(position, center, axis1, axis2, result);\n        };\n    };\nexport default CoplanarPolygonGeometryLibrary;\n"],"names":["Cartesian3","OrientedBoundingBox","Check","Matrix3","Cartesian2"],"mappings":"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"}