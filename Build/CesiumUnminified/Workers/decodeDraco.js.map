{"version":3,"file":"decodeDraco.js","sources":["../../../../Source/WorkersES6/decodeDraco.js"],"sourcesContent":["/* global require */\nimport ComponentDatatype from '../Core/ComponentDatatype.js';\nimport defined from '../Core/defined.js';\nimport IndexDatatype from '../Core/IndexDatatype.js';\nimport RuntimeError from '../Core/RuntimeError.js';\nimport createTaskProcessorWorker from './createTaskProcessorWorker.js';\n\n    var draco;\n\n    function decodeIndexArray(dracoGeometry, dracoDecoder) {\n        var numPoints = dracoGeometry.num_points();\n        var numFaces = dracoGeometry.num_faces();\n        var faceIndices = new draco.DracoInt32Array();\n        var numIndices = numFaces * 3;\n        var indexArray = IndexDatatype.createTypedArray(numPoints, numIndices);\n\n        var offset = 0;\n        for (var i = 0; i < numFaces; ++i) {\n            dracoDecoder.GetFaceFromMesh(dracoGeometry, i, faceIndices);\n\n            indexArray[offset + 0] = faceIndices.GetValue(0);\n            indexArray[offset + 1] = faceIndices.GetValue(1);\n            indexArray[offset + 2] = faceIndices.GetValue(2);\n            offset += 3;\n        }\n\n        draco.destroy(faceIndices);\n\n        return {\n            typedArray : indexArray,\n            numberOfIndices : numIndices\n        };\n    }\n\n    function decodeQuantizedDracoTypedArray(dracoGeometry, dracoDecoder, dracoAttribute, quantization, vertexArrayLength) {\n        var vertexArray;\n        var attributeData;\n        if (quantization.quantizationBits <= 8) {\n            attributeData = new draco.DracoUInt8Array();\n            vertexArray = new Uint8Array(vertexArrayLength);\n            dracoDecoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n        } else {\n            attributeData = new draco.DracoUInt16Array();\n            vertexArray = new Uint16Array(vertexArrayLength);\n            dracoDecoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n        }\n\n        for (var i = 0; i < vertexArrayLength; ++i) {\n            vertexArray[i] = attributeData.GetValue(i);\n        }\n\n        draco.destroy(attributeData);\n        return vertexArray;\n    }\n\n    function decodeDracoTypedArray(dracoGeometry, dracoDecoder, dracoAttribute, vertexArrayLength) {\n        var vertexArray;\n        var attributeData;\n\n        // Some attribute types are casted down to 32 bit since Draco only returns 32 bit values\n        switch (dracoAttribute.data_type()) {\n            case 1: case 11: // DT_INT8 or DT_BOOL\n                attributeData = new draco.DracoInt8Array();\n                vertexArray = new Int8Array(vertexArrayLength);\n                dracoDecoder.GetAttributeInt8ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n                break;\n            case 2: // DT_UINT8\n                attributeData = new draco.DracoUInt8Array();\n                vertexArray = new Uint8Array(vertexArrayLength);\n                dracoDecoder.GetAttributeUInt8ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n                break;\n            case 3: // DT_INT16\n                attributeData = new draco.DracoInt16Array();\n                vertexArray = new Int16Array(vertexArrayLength);\n                dracoDecoder.GetAttributeInt16ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n                break;\n            case 4: // DT_UINT16\n                attributeData = new draco.DracoUInt16Array();\n                vertexArray = new Uint16Array(vertexArrayLength);\n                dracoDecoder.GetAttributeUInt16ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n                break;\n            case 5: case 7: // DT_INT32 or DT_INT64\n                attributeData = new draco.DracoInt32Array();\n                vertexArray = new Int32Array(vertexArrayLength);\n                dracoDecoder.GetAttributeInt32ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n                break;\n            case 6: case 8: // DT_UINT32 or DT_UINT64\n                attributeData = new draco.DracoUInt32Array();\n                vertexArray = new Uint32Array(vertexArrayLength);\n                dracoDecoder.GetAttributeUInt32ForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n                break;\n            case 9: case 10: // DT_FLOAT32 or DT_FLOAT64\n                attributeData = new draco.DracoFloat32Array();\n                vertexArray = new Float32Array(vertexArrayLength);\n                dracoDecoder.GetAttributeFloatForAllPoints(dracoGeometry, dracoAttribute, attributeData);\n                break;\n        }\n\n        for (var i = 0; i < vertexArrayLength; ++i) {\n            vertexArray[i] = attributeData.GetValue(i);\n        }\n\n        draco.destroy(attributeData);\n        return vertexArray;\n    }\n\n    function decodeAttribute(dracoGeometry, dracoDecoder, dracoAttribute) {\n        var numPoints = dracoGeometry.num_points();\n        var numComponents = dracoAttribute.num_components();\n\n        var quantization;\n        var transform = new draco.AttributeQuantizationTransform();\n        if (transform.InitFromAttribute(dracoAttribute)) {\n            var minValues = new Array(numComponents);\n            for (var i = 0; i < numComponents; ++i) {\n                minValues[i] = transform.min_value(i);\n            }\n            quantization = {\n                quantizationBits : transform.quantization_bits(),\n                minValues : minValues,\n                range : transform.range(),\n                octEncoded : false\n            };\n        }\n        draco.destroy(transform);\n\n        transform = new draco.AttributeOctahedronTransform();\n        if (transform.InitFromAttribute(dracoAttribute)) {\n            quantization = {\n                quantizationBits : transform.quantization_bits(),\n                octEncoded : true\n            };\n        }\n        draco.destroy(transform);\n\n        var vertexArrayLength = numPoints * numComponents;\n        var vertexArray;\n        if (defined(quantization)) {\n            vertexArray = decodeQuantizedDracoTypedArray(dracoGeometry, dracoDecoder, dracoAttribute, quantization, vertexArrayLength);\n        } else {\n            vertexArray = decodeDracoTypedArray(dracoGeometry, dracoDecoder, dracoAttribute, vertexArrayLength);\n        }\n\n        var componentDatatype = ComponentDatatype.fromTypedArray(vertexArray);\n\n        return {\n            array : vertexArray,\n            data : {\n                componentsPerAttribute : numComponents,\n                componentDatatype : componentDatatype,\n                byteOffset : dracoAttribute.byte_offset(),\n                byteStride : ComponentDatatype.getSizeInBytes(componentDatatype) * numComponents,\n                normalized : dracoAttribute.normalized(),\n                quantization : quantization\n            }\n        };\n    }\n\n    function decodePointCloud(parameters) {\n        var dracoDecoder = new draco.Decoder();\n\n        if (parameters.dequantizeInShader) {\n            dracoDecoder.SkipAttributeTransform(draco.POSITION);\n            dracoDecoder.SkipAttributeTransform(draco.NORMAL);\n        }\n\n        var buffer = new draco.DecoderBuffer();\n        buffer.Init(parameters.buffer, parameters.buffer.length);\n\n        var geometryType = dracoDecoder.GetEncodedGeometryType(buffer);\n        if (geometryType !== draco.POINT_CLOUD) {\n            throw new RuntimeError('Draco geometry type must be POINT_CLOUD.');\n        }\n\n        var dracoPointCloud = new draco.PointCloud();\n        var decodingStatus = dracoDecoder.DecodeBufferToPointCloud(buffer, dracoPointCloud);\n        if (!decodingStatus.ok() || dracoPointCloud.ptr === 0) {\n            throw new RuntimeError('Error decoding draco point cloud: ' + decodingStatus.error_msg());\n        }\n\n        draco.destroy(buffer);\n\n        var result = {};\n\n        var properties = parameters.properties;\n        for (var propertyName in properties) {\n            if (properties.hasOwnProperty(propertyName)) {\n                var attributeId = properties[propertyName];\n                var dracoAttribute = dracoDecoder.GetAttributeByUniqueId(dracoPointCloud, attributeId);\n                result[propertyName] = decodeAttribute(dracoPointCloud, dracoDecoder, dracoAttribute);\n            }\n        }\n\n        draco.destroy(dracoPointCloud);\n        draco.destroy(dracoDecoder);\n\n        return result;\n    }\n\n    function decodePrimitive(parameters) {\n        var dracoDecoder = new draco.Decoder();\n\n        // Skip all parameter types except generic\n        var attributesToSkip = ['POSITION', 'NORMAL', 'COLOR', 'TEX_COORD'];\n        if (parameters.dequantizeInShader) {\n            for (var i = 0; i < attributesToSkip.length; ++i) {\n                dracoDecoder.SkipAttributeTransform(draco[attributesToSkip[i]]);\n            }\n        }\n\n        var bufferView = parameters.bufferView;\n        var buffer = new draco.DecoderBuffer();\n        buffer.Init(parameters.array, bufferView.byteLength);\n\n        var geometryType = dracoDecoder.GetEncodedGeometryType(buffer);\n        if (geometryType !== draco.TRIANGULAR_MESH) {\n            throw new RuntimeError('Unsupported draco mesh geometry type.');\n        }\n\n        var dracoGeometry = new draco.Mesh();\n        var decodingStatus = dracoDecoder.DecodeBufferToMesh(buffer, dracoGeometry);\n        if (!decodingStatus.ok() || dracoGeometry.ptr === 0) {\n            throw new RuntimeError('Error decoding draco mesh geometry: ' + decodingStatus.error_msg());\n        }\n\n        draco.destroy(buffer);\n\n        var attributeData = {};\n\n        var compressedAttributes = parameters.compressedAttributes;\n        for (var attributeName in compressedAttributes) {\n            if (compressedAttributes.hasOwnProperty(attributeName)) {\n                var compressedAttribute = compressedAttributes[attributeName];\n                var dracoAttribute = dracoDecoder.GetAttributeByUniqueId(dracoGeometry, compressedAttribute);\n                attributeData[attributeName] = decodeAttribute(dracoGeometry, dracoDecoder, dracoAttribute);\n            }\n        }\n\n        var result = {\n            indexArray : decodeIndexArray(dracoGeometry, dracoDecoder),\n            attributeData : attributeData\n        };\n\n        draco.destroy(dracoGeometry);\n        draco.destroy(dracoDecoder);\n\n        return result;\n    }\n\n    function decode(parameters) {\n        if (defined(parameters.primitive)) {\n            return decodePrimitive(parameters);\n        }\n        return decodePointCloud(parameters);\n    }\n\n    function initWorker(dracoModule) {\n        draco = dracoModule;\n        self.onmessage = createTaskProcessorWorker(decode);\n        self.postMessage(true);\n    }\n\n    function decodeDraco(event) {\n        var data = event.data;\n\n        // Expect the first message to be to load a web assembly module\n        var wasmConfig = data.webAssemblyConfig;\n        if (defined(wasmConfig)) {\n            // Require and compile WebAssembly module, or use fallback if not supported\n            return require([wasmConfig.modulePath], function(dracoModule) {\n                if (defined(wasmConfig.wasmBinaryFile)) {\n                    if (!defined(dracoModule)) {\n                        dracoModule = self.DracoDecoderModule;\n                    }\n\n                    dracoModule(wasmConfig).then(function (compiledModule) {\n                        initWorker(compiledModule);\n                    });\n                } else {\n                    initWorker(dracoModule());\n                }\n            });\n        }\n    }\nexport default decodeDraco;\n"],"names":["IndexDatatype","defined","ComponentDatatype","RuntimeError"],"mappings":"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"}